{"ast":null,"code":"var _jsxFileName = \"/media/rk/disk2/React/crwn-clothing-redux/src/components/payment-form/payment-form.component.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { selectCartTotal } from \"../../store/cart/cart.selector\";\nimport { selectCurrentUser } from \"../../store/user/user.selector\";\nimport Button, { BUTTON_TYPE_CLASSES } from \"../button/button.component\";\nimport { PaymentFormContainer, FormContainer } from \"./payment-form.styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentForm = () => {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const amount = useSelector(selectCartTotal);\n  const currentUser = useSelector(selectCurrentUser);\n  const paymentHandler = async e => {\n    e.preventDefault();\n    if (!stripe || !elements) {\n      return;\n    }\n    const response = await fetch('/.netlify/functions/create-payment-intent', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        amount: 10000\n      })\n    }).then(res => res.json());\n    const {\n      paymentIntent: {\n        client_secret\n      }\n    } = response;\n    console.log(client_secret);\n    const paymentResult = stripe.confirmCardPayment(client_secret, {\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: 'Yihua Zhang'\n        }\n      }\n    });\n    if ((await paymentResult).error) {\n      alert((await paymentResult).error);\n    } else {\n      if ((await paymentResult).paymentIntent.status === 'succeeded') {\n        alert('Payment Successful');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(PaymentFormContainer, {\n    children: /*#__PURE__*/_jsxDEV(FormContainer, {\n      onSubmit: paymentHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" Credit Card Payment: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        buttonType: BUTTON_TYPE_CLASSES.inverted,\n        children: \" Pay Now \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentForm, \"8uX/n2YfF008ASg8bA2QoWTGuj0=\", false, function () {\n  return [useStripe, useElements, useSelector, useSelector];\n});\n_c = PaymentForm;\nexport default PaymentForm;\nvar _c;\n$RefreshReg$(_c, \"PaymentForm\");","map":{"version":3,"names":["useState","useSelector","CardElement","useStripe","useElements","selectCartTotal","selectCurrentUser","Button","BUTTON_TYPE_CLASSES","PaymentFormContainer","FormContainer","jsxDEV","_jsxDEV","PaymentForm","_s","stripe","elements","amount","currentUser","paymentHandler","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","then","res","json","paymentIntent","client_secret","console","log","paymentResult","confirmCardPayment","payment_method","card","getElement","billing_details","name","error","alert","status","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","buttonType","inverted","_c","$RefreshReg$"],"sources":["/media/rk/disk2/React/crwn-clothing-redux/src/components/payment-form/payment-form.component.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\n\n\nimport { selectCartTotal } from \"../../store/cart/cart.selector\";\nimport { selectCurrentUser } from \"../../store/user/user.selector\";\nimport Button, { BUTTON_TYPE_CLASSES } from \"../button/button.component\";\nimport { PaymentFormContainer, FormContainer } from \"./payment-form.styles\";\n\nconst PaymentForm = () => {\n    const stripe = useStripe();\n    const elements = useElements();\n    const amount = useSelector(selectCartTotal);\n    const currentUser = useSelector(selectCurrentUser);\n\n    const paymentHandler = async (e) => {\n        e.preventDefault();\n\n        if (!stripe || !elements) {\n            return;\n        }\n        \n        const response = await fetch('/.netlify/functions/create-payment-intent', {\n            method: 'post',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ amount: 10000 })\n        }).then(res => res.json());\n\n        const {paymentIntent: {client_secret}} = response;\n\n        console.log(client_secret);\n\n        const paymentResult = stripe.confirmCardPayment(client_secret, {\n            payment_method: {\n                card: elements.getElement(CardElement),\n                billing_details: {\n                    name: 'Yihua Zhang'\n                }\n            }\n        });\n\n        if ((await paymentResult).error) {\n            alert((await paymentResult).error);\n        } else {\n            if ((await paymentResult).paymentIntent.status === 'succeeded') {\n                alert('Payment Successful');\n            }\n        }\n    };\n    \n    return (\n        <PaymentFormContainer>\n            <FormContainer onSubmit={paymentHandler}>\n                <h2> Credit Card Payment: </h2>\n                <CardElement />\n                <Button buttonType={BUTTON_TYPE_CLASSES.inverted}> Pay Now </Button>\n            </FormContainer>\n        </PaymentFormContainer>\n    );\n};\n\nexport default PaymentForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}